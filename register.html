<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>טופס הרשמה</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Assistant&display=swap">
  <style>
    html, body {
      margin: 0; padding: 0; height: 100%;
      font-family: 'Assistant', Arial, sans-serif;
      direction: rtl;
      background: url('images/11.jpg') no-repeat center center fixed;
      background-size: cover;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    .overlay {
      background: rgba(255, 255, 255, 0.6);
      min-height: 100vh;
      padding: 40px 15px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    form {
      background: rgba(255,255,255,0.7);
      padding: 35px 30px;
      border-radius: 14px;
      max-width: 600px;
      width: 100%;
      box-shadow: 0 8px 25px rgba(0,0,0,0.25);
    }

    h2 {
      text-align: center;
      margin-bottom: 28px;
      color: #1c3b6b;
      font-weight: 700;
      font-size: 2.2rem;
    }

    label {
      display: block;
      margin-top: 18px;
      font-weight: 700;
      color: #1c3b6b;
      font-size: 1.15rem;
    }

    input, select, textarea {
      width: 100%;
      margin-top: 8px;
      padding: 12px 16px;
      font-size: 1.05rem;
      border-radius: 8px;
      border: 2px solid #1c3b6b;
      background: rgba(255,255,255,0.95);
      color: #1c3b6b;
      box-sizing: border-box;
    }

    textarea { resize: vertical; }

    button {
      width: 100%;
      margin-top: 32px;
      padding: 16px;
      font-size: 1.3rem;
      background-color: #1c3b6b;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 800;
      position: relative;
      overflow: hidden;
    }

    .plane-icon {
      position: absolute;
      right: 16px;
      top: 50%;
      width: 20px;
      height: 20px;
      fill: white;
      transform: translateY(-50%);
      transition: transform 0.6s ease, opacity 0.6s ease;
    }

    .sending .plane-icon {
      animation: flyPlane 1.5s forwards;
    }

    @keyframes flyPlane {
      0% { transform: translateY(-50%) translateX(0); opacity: 1; }
      100% { transform: translateY(-150%) translateX(200%); opacity: 0; }
    }

    .thankyou-message {
      display: none;
      text-align: center;
      margin-top: 30px;
      font-size: 1.4rem;
      font-weight: 700;
      color: green;
    }

    .thankyou-message.error { color: red; }
  </style>
</head>
<body>
<div class="overlay">
  <form id="registrationForm">
    <h2>טופס הרשמה לקורס</h2>

    <label for="name">שם מלא *</label>
    <input type="text" id="name" name="name" required />

    <label for="phone">טלפון *</label>
    <input type="tel" id="phone" name="phone" required />

    <label for="email">אימייל *</label>
    <input type="email" id="email" name="email" required />

    <label for="courseName">שם הקורס</label>
    <input type="text" id="courseName" name="courseName" readonly />

    <label for="startDate">תאריך התחלה</label>
    <input type="text" id="startDate" name="startDate" readonly />

    <label for="endDate">תאריך סיום</label>
    <input type="text" id="endDate" name="endDate" readonly />

    <label for="location">מיקום</label>
    <input type="text" id="location" name="location" readonly />

    <label for="paymentMethod">אופן תשלום</label>
    <select id="paymentMethod" name="paymentMethod" required>
      <option value="" disabled selected>בחר</option>
      <option value="אשראי">אשראי</option>
      <option value="מזומן">מזומן</option>
      <option value="העברה בנקאית">העברה בנקאית</option>
      <option value="ביט">ביט</option>
    </select>

    <label for="notes">הערות</label>
    <textarea id="notes" name="notes"></textarea>

    <button type="submit">
      שלח הרשמה
      <svg class="plane-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
      </svg>
    </button>
    <div class="thankyou-message" id="thankyouMessage"></div>
  </form>
</div>

<script src="https://cdn.emailjs.com/sdk/3.2/email.min.js"></script>
<script>
  emailjs.init('miOp6iToFLfbH1jk5');

  const form = document.getElementById('registrationForm');
  const thankyou = document.getElementById('thankyouMessage');
  const btn = form.querySelector('button');

  form.addEventListener('submit', function(e) {
    e.preventDefault();
    btn.classList.add('sending');

    const data = {
      name: form.name.value,
      phone: form.phone.value,
      email: form.email.value,
      course: form.courseName.value,
      start: form.startDate.value,
      end: form.endDate.value,
      location: form.location.value,
      payment: form.paymentMethod.value,
      notes: form.notes.value
    };

    emailjs.send('service_45f1wyc', 'template_wdtd8zn', data)
      .then(() => {
        thankyou.textContent = 'הטופס נשלח בהצלחה!';
        thankyou.classList.remove('error');
        thankyou.style.display = 'block';
        form.reset();
      })
      .catch(() => {
        thankyou.textContent = 'שליחה נכשלה. נסה שוב.';
        thankyou.classList.add('error');
        thankyou.style.display = 'block';
      })
      .finally(() => {
        btn.classList.remove('sending');
      });
  });
</script>
</body>
</html>
